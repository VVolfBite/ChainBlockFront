---
import Head from "../components/_head.astro";
import Footer from "../components/dashboard/_footer.astro";
import Topbar from "../components/dashboard/_topbar.astro";
import Sidenav from "../components/dashboard/_sidenav.astro";
import Scripts from "../components/_scripts.astro";

const title = "AdminLTE | Dashboard v2";
const path = "../../dist";
const mainPage = "dashboard";
const page = "index2";



---

<!doctype html>
<html lang="en">
  <!--begin::Head-->
  <head>
    <Head title={title} path={path} />

    <!-- apexcharts -->
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.css"
      integrity="sha256-4MX+61mt9NVvvuPjUWdUdyfZfxSB1/Rf9WtqRHgG5S0="
      crossorigin="anonymous"
    />
  </head>

  <body class="layout-fixed sidebar-expand-lg bg-body-tertiary">
    <!--begin::App Wrapper-->
    <div class="app-wrapper">
      <Topbar path={path} />
      <Sidenav path={path} mainPage={mainPage} page={page} />
      <!--begin::App Main-->
      <main class="app-main">
        <!--begin::App Content Header-->
        <div class="app-content-header">
          <!--begin::Container-->
          <div class="container-fluid">
            <!--begin::Row-->
            <div class="row">
              <div class="col-sm-6">
                <h3 class="mb-0">总览面板</h3>
              </div>
              <div class="col-sm-6">
                <ol class="breadcrumb float-sm-end">
                  <li class="breadcrumb-item"><a href="#">面板</a></li>
                  <li class="breadcrumb-item active" aria-current="page">
                    总览面板
                  </li>
                </ol>
              </div>
            </div>
            <!--end::Row-->
          </div>
          <!--end::Container-->
        </div>
        <div class="app-content">
          <!--begin::Container-->
          <div class="container-fluid">
            <!-- Info boxes -->
            <div class="row">
              <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box">
                  <span class="info-box-icon text-bg-primary shadow-sm">
                    <i class="bi bi-box-fill"></i>
                  </span>

                  <div class="info-box-content">
                    <span class="info-box-text">区块数</span>
                    <span class="info-box-number" id="blockNumBox"></span>
                  </div>
                  <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
              </div>
              <!-- /.col -->
              <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box">
                  <span class="info-box-icon text-bg-danger shadow-sm">
                    <i class="bi bi bi-clipboard2-check"></i>
                  </span>

                  <div class="info-box-content">
                    <span class="info-box-text">事务量</span>
                    <span class="info-box-number" id="txnNumBox"></span>
                  </div>
                  <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
              </div>
              <!-- /.col -->

              <!-- fix for small devices only -->
              <!-- <div class="clearfix hidden-md-up"></div> -->

              <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box">
                  <span class="info-box-icon text-bg-success shadow-sm">
                    <i class="bi bi-gear-fill"></i>
                  </span>

                  <div class="info-box-content">
                    <span class="info-box-text">节点数</span>
                    <span class="info-box-number" id="nodeNumBox"></span>
                  </div>
                  <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
              </div>
              <!-- /.col -->
              <div class="col-12 col-sm-6 col-md-3">
                <div class="info-box">
                  <span class="info-box-icon text-bg-warning shadow-sm">
                    <i class="bi bi-file-earmark-code"></i>
                  </span>

                  <div class="info-box-content">
                    <span class="info-box-text">链码数</span>
                    <span class="info-box-number" id="chainCodeNumBox"></span>
                  </div>
                  <!-- /.info-box-content -->
                </div>
                <!-- /.info-box -->
              </div>
              <!-- /.col -->
            </div>
            <!-- /.row -->

            <!--begin::Row-->
            <div class="row">
              <div class="col-md-12">
                <div class="card mb-4">
                  <div class="card-header">
                    <h5 class="card-title">运行情况</h5>

                    <div class="card-tools">
                      <button
                        type="button"
                        class="btn btn-tool"
                        data-lte-toggle="card-collapse"
                      >
                        <i data-lte-icon="expand" class="bi bi-plus-lg"></i>
                        <i data-lte-icon="collapse" class="bi bi-dash-lg"></i>
                      </button>
                      <div class="btn-group">
                        <button
                          type="button"
                          class="btn btn-tool dropdown-toggle"
                          data-bs-toggle="dropdown"
                        >
                          <i class="bi bi-wrench"></i>
                        </button>
                        <div
                          class="dropdown-menu dropdown-menu-end"
                          role="menu"
                        >
                          <a href="#" class="dropdown-item">Action</a>
                          <a href="#" class="dropdown-item">Another action</a>
                          <a href="#" class="dropdown-item">
                            Something else here
                          </a>
                          <a class="dropdown-divider"></a>
                          <a href="#" class="dropdown-item">Separated link</a>
                        </div>
                      </div>
                      <button
                        type="button"
                        class="btn btn-tool"
                        data-lte-toggle="card-remove"
                      >
                        <i class="bi bi-x-lg"></i>
                      </button>
                    </div>
                  </div>
                  <!-- /.card-header -->
                  <div class="card-body">
                    <!--begin::Row-->
                    <div class="row">
                      <div class="col-md-8">
                        <p class="text-center">
                          <strong>Sales: 1 Jan, 2023 - 30 Jul, 2023</strong>
                        </p>

                        <div id="sales-chart"></div>
                      </div>
                      <!-- /.col -->
                      <div class="col-md-4">
                        <p class="text-center">
                          <strong>吞吐/时延总览(每5s采样)</strong>
                        </p>

                        <div class="progress-group">
                          事务吞吐率
                          <span class="float-end" ><b id="txnThroughputText"></b>份</span>
                          <div class="progress progress-sm">
                            <div
                              id="txnThroughputBar"
                              class="progress-bar text-bg-primary"
                              style="width: 80%"
                            >
                            </div>
                          </div>
                        </div>


                        <!-- /.progress-group -->
                        <div class="progress-group">
                          <span class="progress-text">块吞吐率</span>
                          <span class="float-end"><b id="blockThroughputText"></b>块</span>
                          <div class="progress progress-sm">
                            <div
                              id= "blockThroughputBar"
                              class="progress-bar text-bg-success"
                              style="width: 60%"
                            >
                            </div>
                          </div>
                        </div>
                        
                        <!-- /.progress-group -->                        
                        <div class="progress-group">
                          事务时延
                          <span class="float-end"><b id="txnLatencyText"></b>ms</span>
                          <div class="progress progress-sm">
                            <div
                              id="txnLatencyBar"
                              class="progress-bar text-bg-danger"
                              style="width: 75%"
                            >
                            </div>
                          </div>
                        </div>



                        <!-- /.progress-group -->
                        <div class="progress-group">
                          块时延
                          <span class="float-end"><b id="blockLatencyText"></b>ms</span>
                          <div class="progress progress-sm">
                            <div
                              id="blockLatencyBar"
                              class="progress-bar text-bg-warning"
                              style="width: 50%"
                            >
                            </div>
                          </div>
                        </div>
                        <!-- /.progress-group -->
                      </div>
                      <!-- /.col -->
                    </div>
                    <!--end::Row-->
                  </div>
                  <!-- ./card-body -->
                  <div class="card-footer">
                    <!--begin::Row-->
                    <div class="row">
                      <div class="col-md-3 col-6">
                        <div class="text-center border-end">
                          <!-- InProgress<span class="text-success">
                            <i class="bi bi-caret-up-fill"></i> 17%
                          </span> -->
                          <h5 class="fw-bold mb-0"><b id="txnThroughputAvgText"></b> 份/s</h5>
                          <span class="text-uppercase">平均事务吞吐率</span>
                        </div>
                      </div>

                      <!-- /.col -->
                      <div class="col-md-3 col-6">
                        <div class="text-center border-end">
                          <!-- <span class="text-info">
                            <i class="bi bi-caret-left-fill"></i> 0%
                          </span> -->
                          <h5 class="fw-bold mb-0"><b id="blockThroughputAvgText"></b> 块/s</h5>
                          <span class="text-uppercase">平均块吞吐率</span>
                        </div>
                      </div>
                      <!-- /.col -->
                      <div class="col-md-3 col-6">
                        <div class="text-center border-end">
                          <!-- <span class="text-success">
                            <i class="bi bi-caret-up-fill"></i> 20%
                          </span> -->
                          <h5 class="fw-bold mb-0"><b id="txnLatencyAvgText"></b> ms</h5>
                          <span class="text-uppercase">平均事务时延</span>
                        </div>
                      </div>
                      <!-- /.col -->
                      <div class="col-md-3 col-6">
                        <div class="text-center">
                          <!-- <span class="text-danger">
                            <i class="bi bi-caret-down-fill"></i> 18%
                          </span> -->
                          <h5 class="fw-bold mb-0"><b id="blockLatencyAvgText"></b>ms</h5>
                          <span class="text-uppercase">平均块时延</span>
                        </div>
                      </div>
                    </div>
                    <!--end::Row-->
                  </div>
                  <!-- /.card-footer -->
                </div>
                <!-- /.card -->
              </div>
              <!-- /.col -->
            </div>
            <!--end::Row-->

            <!--begin::Row-->
            <div class="row">
              <!-- Start col -->
              <div class="col-md-8">
                <!--begin::Latest Order Widget-->
                <div class="card">
                  <div class="card-header">
                    <h3 class="card-title">最新块概览</h3>
                    <div class="card-tools">
                      <button
                        type="button"
                        class="btn btn-tool"
                        data-lte-toggle="card-collapse"
                      >
                        <i data-lte-icon="expand" class="bi bi-plus-lg"></i>
                        <i data-lte-icon="collapse" class="bi bi-dash-lg"></i>
                      </button>
                      <button
                        type="button"
                        class="btn btn-tool"
                        data-lte-toggle="card-remove"
                      >
                        <i class="bi bi-x-lg"></i>
                      </button>
                    </div>
                  </div>
                  <!-- /.card-header -->
                  <div class="card-body p-0">
                    <div class="table-responsive">
                      <table class="table m-0">
                        <thead>
                          <tr>
                            <th>块编号</th>
                            <th>块内事务量</th>
                            <th>块状态</th>
                            <th>块阶段计时</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>
                              <a
                                href="pages/examples/invoice.html"
                                class="link-primary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                >OR9842</a
                              >
                            </td>
                            <td>Call of Duty IV</td>
                            <td>
                              <span class="badge text-bg-success">
                                Shipped
                              </span>
                            </td>
                            <td>
                              <div id="table-sparkline-1"></div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <a
                                href="pages/examples/invoice.html"
                                class="link-primary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                >OR1848</a
                              >
                            </td>
                            <td>Samsung Smart TV</td>
                            <td>
                              <span class="badge text-bg-warning">Pending</span>
                            </td>
                            <td>
                              <div id="table-sparkline-2"></div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <a
                                href="pages/examples/invoice.html"
                                class="link-primary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                >OR7429</a
                              >
                            </td>
                            <td>iPhone 6 Plus</td>
                            <td>
                              <span class="badge text-bg-danger">
                                Delivered
                              </span>
                            </td>
                            <td>
                              <div id="table-sparkline-3"></div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <a
                                href="pages/examples/invoice.html"
                                class="link-primary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                >OR7429</a
                              >
                            </td>
                            <td>Samsung Smart TV</td>
                            <td>
                              <span class="badge text-bg-info">Processing</span>
                            </td>
                            <td>
                              <div id="table-sparkline-4"></div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <a
                                href="pages/examples/invoice.html"
                                class="link-primary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                >OR1848</a
                              >
                            </td>
                            <td>Samsung Smart TV</td>
                            <td>
                              <span class="badge text-bg-warning">Pending</span>
                            </td>
                            <td>
                              <div id="table-sparkline-5"></div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <a
                                href="pages/examples/invoice.html"
                                class="link-primary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                >OR7429</a
                              >
                            </td>
                            <td>iPhone 6 Plus</td>
                            <td>
                              <span class="badge text-bg-danger">
                                Delivered
                              </span>
                            </td>
                            <td>
                              <div id="table-sparkline-6"></div>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <a
                                href="pages/examples/invoice.html"
                                class="link-primary link-offset-2 link-underline-opacity-25 link-underline-opacity-100-hover"
                                >OR9842</a
                              >
                            </td>
                            <td>Call of Duty IV</td>
                            <td>
                              <span class="badge text-bg-success">Shipped</span>
                            </td>
                            <td>
                              <div id="table-sparkline-7"></div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <!-- /.table-responsive -->
                  </div>
                  <!-- /.card-body -->
                  <div class="card-footer clearfix">
                    <a
                      href="javascript:void(0)"
                      class="btn btn-sm btn-primary float-start"
                    >
                      添加新的事务
                    </a>
                    <a
                      href="javascript:void(0)"
                      class="btn btn-sm btn-secondary float-end"
                    >
                      查看所有事务
                    </a>
                  </div>
                  <!-- /.card-footer -->
                </div>
                <!-- /.card -->
              </div>
              <!-- /.col -->

              <div class="col-md-4">
                <div class="card mb-4">
                  <div class="card-header">
                    <h3 class="card-title">暂定</h3>

                    <div class="card-tools">
                      <button
                        type="button"
                        class="btn btn-tool"
                        data-lte-toggle="card-collapse"
                      >
                        <i data-lte-icon="expand" class="bi bi-plus-lg"></i>
                        <i data-lte-icon="collapse" class="bi bi-dash-lg"></i>
                      </button>
                      <button
                        type="button"
                        class="btn btn-tool"
                        data-lte-toggle="card-remove"
                      >
                        <i class="bi bi-x-lg"></i>
                      </button>
                    </div>
                  </div>
                  <!-- /.card-header -->
                  <div class="card-body">
                    <!--begin::Row-->
                    <div class="row">
                      <div class="col-12">
                        <div id="pie-chart"></div>
                      </div>
                      <!-- /.col -->
                    </div>
                    <!--end::Row-->
                  </div>
                  <!-- /.card-body -->
                  <div class="card-footer p-0">
                    <ul class="nav nav-pills flex-column">
                      <li class="nav-item">
                        <a href="#" class="nav-link">
                          United States of America
                          <span class="float-end text-danger">
                            <i class="bi bi-arrow-down fs-7"></i>
                             12%
                          </span>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a href="#" class="nav-link">
                          India
                          <span class="float-end text-success">
                            <i class="bi bi-arrow-up fs-7"></i> 4%
                          </span>
                        </a>
                      </li>
                      <li class="nav-item">
                        <a href="#" class="nav-link">
                          China
                          <span class="float-end text-info">
                            <i class="bi bi-arrow-left fs-7"></i> 0%
                          </span>
                        </a>
                      </li>
                    </ul>
                  </div>
                  <!-- /.footer -->
                </div>
                <!-- /.card this-->

              </div>
              <!-- /.col -->
            </div>
            <!--end::Row-->
          </div>
          <!--end::Container-->
        </div>
        <!--end::App Content-->
      </main>
      <!--end::App Main-->
      <Footer />
    </div>
    <!--end::App Wrapper-->
    <!--begin::Script-->
    <Scripts path={path} />

    <!-- OPTIONAL SCRIPTS -->

    <!-- apexcharts -->
    <script
      src="https://cdn.jsdelivr.net/npm/apexcharts@3.37.1/dist/apexcharts.min.js"
      integrity="sha256-+vh8GkaU7C9/wbSLIcwq82tQ2wTf44aOHA8HlBMwRI8="
      crossorigin="anonymous"
    ></script>
    <script is:inline>
      // NOTICE!! DO NOT USE ANY OF THIS JAVASCRIPT
      // IT'S ALL JUST JUNK FOR DEMO
      // ++++++++++++++++++++++++++++++++++++++++++

      /* apexcharts
       * -------
       * Here we will create a few charts using apexcharts
       */

      //-----------------------
      // - Normal Info Box-
      //-----------------------

      const blockNum = 10;
      const txnNum = 20;
      const nodeNum = 5;
      const chainCodeNum = 1; 
      const blockNumBox = document.getElementById("blockNumBox") ;
      blockNumBox.innerHTML=blockNum;
      const txnNumBox = document.getElementById("txnNumBox") ;
      txnNumBox.innerHTML=txnNum;
      const nodeNumBox = document.getElementById("nodeNumBox") ;
      nodeNumBox.innerHTML=nodeNum;
      const chainCodeNumBox = document.getElementById("chainCodeNumBox") ;
      chainCodeNumBox.innerHTML=chainCodeNum;

      //-----------------------
      // - End Normal Info Box-
      //-----------------------

      //-----------------------
      // - Running Info Box-
      //-----------------------

      const blockLatency = 30;
      const blockLatencyAvg = 100;
      const blockLatencyMax = 100;
      const blockThroughput = 20;
      const blockThroughputAvg = 20;
      const blockThroughputMax = 100;
      const txnLatency=10;
      const txnLatencyAvg=10;
      const txnLatencyMax = 100;
      const txnThroughput=20;
      const txnThroughputAvg=20;
      const txnThroughputMax=100;

      const blockLatencyText = document.getElementById("blockLatencyText") ;
      blockLatencyText.innerHTML=blockLatency;
      const blockLatencyBar = document.getElementById("blockLatencyBar") ;
      blockLatencyBar.style.width=100*blockLatency/blockLatencyMax+"%";
      const blockLatencyAvgText = document.getElementById("blockLatencyAvgText") ;
      blockLatencyAvgText.innerHTML=blockLatencyAvg;

      const blockThroughputText = document.getElementById("blockThroughputText") ;
      blockThroughputText.innerHTML=blockThroughput;
      const blockThroughputBar = document.getElementById("blockThroughputBar") ;
      blockThroughputBar.style.width=100*blockThroughput/blockThroughputMax+"%";
      const blockThroughputAvgText = document.getElementById("blockThroughputAvgText") ;
      blockThroughputAvgText.innerHTML=blockThroughputAvg;

      const txnLatencyText = document.getElementById("txnLatencyText") ;
      txnLatencyText.innerHTML=txnLatency;
      const txnLatencyBar = document.getElementById("txnLatencyBar") ;
      txnLatencyBar.style.width=100*txnLatency/txnLatencyMax+"%";
      const txnLatencyAvgText = document.getElementById("txnLatencyAvgText") ;
      txnLatencyAvgText.innerHTML=txnLatencyAvg;

      const txnThroughputText = document.getElementById("txnThroughputText") ;
      txnThroughputText.innerHTML=txnThroughput;
      const txnThroughputBar = document.getElementById("txnThroughputBar") ;
      txnThroughputBar.style.width=100*txnThroughput/txnThroughputMax+"%";
      const txnThroughputAvgText = document.getElementById("txnThroughputAvgText") ;
      txnThroughputAvgText.innerHTML=txnThroughputAvg;


      //-----------------------
      // - Running Info Box-
      //-----------------------


      //-----------------------
      // - MONTHLY SALES CHART -
      //-----------------------

      const sales_chart_options = {
        series: [
          {
            name: "Digital Goods",
            data: [28, 48, 40, 19, 86, 27, 90],
          },
          {
            name: "Electronics",
            data: [65, 59, 80, 81, 56, 55, 40],
          },
        ],
        chart: {
          height: 180,
          type: "area",
          toolbar: {
            show: false,
          },
        },
        legend: {
          show: false,
        },
        colors: ["#0d6efd", "#20c997"],
        dataLabels: {
          enabled: false,
        },
        stroke: {
          curve: "smooth",
        },
        xaxis: {
          type: "datetime",
          categories: [
            "2023-01-01",
            "2023-02-01",
            "2023-03-01",
            "2023-04-01",
            "2023-05-01",
            "2023-06-01",
            "2023-07-01",
          ],
        },
        tooltip: {
          x: {
            format: "MMMM yyyy",
          },
        },
      };

      const sales_chart = new ApexCharts(
        document.querySelector("#sales-chart"),
        sales_chart_options,
      );
      sales_chart.render();

      //---------------------------
      // - END MONTHLY SALES CHART -
      //---------------------------


      function createSparklineChart(selector, data) {
        const options = {
          series: [{ data }],
          chart: {
            type: "line",
            width: 150,
            height: 30,
            sparkline: {
              enabled: true,
            },
          },
          colors: ["var(--bs-primary)"],
          stroke: {
            width: 2,
          },
          tooltip: {
            fixed: {
              enabled: false,
            },
            x: {
              show: false,
            },
            y: {
              title: {
                formatter: function (seriesName) {
                  return "";
                },
              },
            },
            marker: {
              show: false,
            },
          },
        };

        const chart = new ApexCharts(document.querySelector(selector), options);
        chart.render();
      }

      const table_sparkline_1_data = [
        25, 66, 41, 89, 63, 25, 44, 12, 36, 9, 54,
      ];
      const table_sparkline_2_data = [
        12, 56, 21, 39, 73, 45, 64, 52, 36, 59, 44,
      ];
      const table_sparkline_3_data = [
        15, 46, 21, 59, 33, 15, 34, 42, 56, 19, 64,
      ];
      const table_sparkline_4_data = [
        30, 56, 31, 69, 43, 35, 24, 32, 46, 29, 64,
      ];
      const table_sparkline_5_data = [
        20, 76, 51, 79, 53, 35, 54, 22, 36, 49, 64,
      ];
      const table_sparkline_6_data = [
        5, 36, 11, 69, 23, 15, 14, 42, 26, 19, 44,
      ];
      const table_sparkline_7_data = [
        12, 56, 21, 39, 73, 45, 64, 52, 36, 59, 74,
      ];

      createSparklineChart("#table-sparkline-1", table_sparkline_1_data);
      createSparklineChart("#table-sparkline-2", table_sparkline_2_data);
      createSparklineChart("#table-sparkline-3", table_sparkline_3_data);
      createSparklineChart("#table-sparkline-4", table_sparkline_4_data);
      createSparklineChart("#table-sparkline-5", table_sparkline_5_data);
      createSparklineChart("#table-sparkline-6", table_sparkline_6_data);
      createSparklineChart("#table-sparkline-7", table_sparkline_7_data);

      //-------------
      // - PIE CHART -
      //-------------

      const pie_chart_options = {
        series: [700, 500, 400, 600, 300, 100],
        chart: {
          type: "donut",
        },
        labels: ["Chrome", "Edge", "FireFox", "Safari", "Opera", "IE"],
        dataLabels: {
          enabled: false,
        },
        colors: [
          "#0d6efd",
          "#20c997",
          "#ffc107",
          "#d63384",
          "#6f42c1",
          "#adb5bd",
        ],
      };

      const pie_chart = new ApexCharts(
        document.querySelector("#pie-chart"),
        pie_chart_options,
      );
      pie_chart.render();

      //-----------------
      // - END PIE CHART -
      //-----------------
    </script>
    <!--end::Script-->
  </body>
  <!--end::Body-->
</html>
